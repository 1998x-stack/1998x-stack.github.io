# 03_2.2.4_Searching_with_Partial_Observations

"""

Lecture: 2_Problem-solving/2.2_Beyond_Classical_Search
Content: 03_2.2.4_Searching_with_Partial_Observations

"""

### 4.4 在部分观测下的搜索

在第四章中，我们探讨了在部分观测环境中进行搜索的方法。这一节内容深入研究了代理人在无法完全观测环境状态时，如何利用其感知信息进行有效的决策和搜索。具体分析如下：

#### 1. 引言

在部分观测环境中，代理人的感知信息不足以完全确定其所在的状态。这种情况下，即使环境是确定性的，一个动作也可能导致多个可能的结果。因此，解决部分观测问题的关键概念是信念状态（Belief State），它表示代理人在给定的动作和感知序列后，关于其可能处于哪些物理状态的当前信念 。

#### 2. 信念状态

信念状态是代理人当前对其可能处于哪些物理状态的信念的表示。信念状态空间的搜索问题不同于传统的物理状态空间的搜索问题，因为在信念状态空间中，问题是完全可观测的。我们首先考虑没有任何传感器的情形，然后引入部分观测和非确定性动作。

##### 2.1 无观测的搜索

当代理人的感知完全无法提供任何信息时，我们称之为无传感器问题或一致性问题（conformant problem）。尽管代理人无法知道其确切的状态，这类问题通常是可以解决的。例如，在无传感器吸尘器世界中，代理人通过一系列动作可以确保最终达到目标状态，即使它无法确切知道其当前的位置 。

#### 3. 部分观测的搜索

对于一般的部分观测问题，我们需要定义环境如何为代理人生成感知。例如，在局部感知的吸尘器世界中，代理人具有位置传感器和局部灰尘传感器，但无法检测其他格子的灰尘状态。正式的问题描述包括一个感知函数（PERCEPT(s)），它返回给定状态下接收到的感知  。

##### 3.1 预测阶段

预测阶段与无传感器问题相同：给定信念状态 $b$ 和动作 $a$，预测的信念状态为 $ \hat{b} = \text{PREDICT}(b, a) $ 。

##### 3.2 感知预测阶段

感知预测阶段确定在预测的信念状态中可能观察到的感知集合： 
$$ \text{POSSIBLE-PERCEPTS}(\hat{b}) = \{ o : o = \text{PERCEPT}(s) \text{ 且 } s \in \hat{b} \} $ 。

##### 3.3 更新阶段

更新阶段根据每个可能的感知确定新的信念状态： 
$$ b_o = \text{UPDATE}(\hat{b}, o) = \{ s : o = \text{PERCEPT}(s) \text{ 且 } s \in \hat{b} \} $ 。

每个更新后的信念状态 $ b_o $ 都不会比预测的信念状态 $ \hat{b} $ 更大；与无传感器情形相比，观测只能减少不确定性。对于确定性传感，感知的不同可能状态的信念状态是互斥的，形成对原预测信念状态的划分 。

#### 4. 解决部分观测问题

在部分观测问题中，使用AND-OR图搜索算法可以直接应用于信念状态空间，以得出解决方案。对于给定的感知函数和物理问题的结果函数，可以通过AND-OR搜索树找到解决方案。例如，在局部感知的吸尘器世界中，给定初始感知[A,Dirty]，解决方案是条件计划[Suck, Right, if Bstate = {6} then Suck else [ ]]  。

#### 5. 部分观测环境中的智能体设计

在部分观测环境中，问题求解智能体的设计与简单问题求解智能体类似：智能体构建问题，调用搜索算法（如AND-OR图搜索）来解决问题，并执行解决方案。主要区别在于，问题的解决方案是一个条件计划而非顺序计划；智能体需要在执行过程中维护其信念状态，并根据感知信息更新其信念状态 。

总之，在部分观测环境中进行搜索时，维护信念状态是任何智能系统的核心功能。这一过程类似于递归状态估计，它通过递归计算新的信念状态来反映代理人的当前知识和感知信息 。