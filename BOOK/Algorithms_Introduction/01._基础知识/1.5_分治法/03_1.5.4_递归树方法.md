# 03_1.5.4_递归树方法

"""
Lecture: 01._基础知识/1.5_分治法
Content: 03_1.5.4_递归树方法
"""

### 03_1.5.4_递归树方法 深度解析

#### 1. 引言

在分治法中，递归树方法是一种强有力的工具，用于分析递归关系的时间复杂度。通过将递归关系图形化为树结构，我们可以直观地理解每个子问题的成本和整个递归过程的总成本。

#### 2. 递归树方法的基本原理

递归树方法通过以下步骤分析递归方程：

1. **构建递归树**：每个节点表示递归调用的成本，树的每个层级表示递归的深度。
2. **计算每层的成本**：每层的成本是所有节点成本的总和。
3. **总成本的累加**：将所有层的成本相加得到递归关系的总成本。

通过这种方法，我们可以将递归方程转化为树结构，从而更容易理解和计算其复杂度。

#### 3. 递归树的构建

##### 示例

考虑以下递归方程：

$$
T(n) = 3T\left(\frac{n}{4}\right) + n^2
$$

为了构建递归树，我们需要遵循以下步骤：

1. **根节点成本**：将根节点的成本表示为 $cn^2$。
2. **子节点递归**：根节点有三个子节点，每个子节点的成本为 $T\left(\frac{n}{4}\right)$。
3. **递归展开**：继续递归展开每个子节点，直到子问题规模减小到常数。

##### 递归树展开

递归树的展开如下图所示：

```
            T(n)
           /  |  \
  T(n/4)  T(n/4)  T(n/4)
   /|\      /|\      /|\
... ...    ... ...  ... ...
```

每一层的成本是所有节点成本的总和，例如，第一层的成本为 $cn^2$，第二层的成本为 $3 \times c \left(\frac{n}{4}\right)^2 = \frac{3}{16} cn^2$。

#### 4. 总成本的计算

通过累加每一层的成本，可以得到递归树的总成本：

$$
T(n) = cn^2 + \frac{3}{16} cn^2 + \left(\frac{3}{16}\right)^2 cn^2 + \ldots
$$

这实际上是一个无限几何级数。根据几何级数的求和公式，当公比 $r < 1$ 时，总和为：

$$
\sum_{k=0}^{\infty} ar^k = \frac{a}{1-r}
$$

对于我们的递归树：

$$
a = cn^2, \quad r = \frac{3}{16}
$$

因此，总成本为：

$$
T(n) = \frac{cn^2}{1 - \frac{3}{16}} = \frac{cn^2}{\frac{13}{16}} = \frac{16}{13}cn^2 = O(n^2)
$$

#### 5. 递归树方法的应用场景

递归树方法不仅适用于简单的递归方程，还广泛应用于各种复杂的分治算法分析中。例如，在合并排序、快速排序和矩阵乘法等算法中，递归树方法都可以帮助我们直观地理解和计算其时间复杂度。

#### 6. 优缺点分析

**优点**：
- **直观性**：递归树方法通过图形化展示递归过程，直观且易于理解。
- **适用性广**：适用于各种分治算法的复杂度分析。

**缺点**：
- **复杂度**：对于某些复杂的递归方程，构建递归树和计算每层成本可能比较繁琐。
- **准确性依赖**：需要确保每层的成本计算准确，以避免总成本计算误差。

#### 7. 总结

递归树方法作为一种强有力的递归关系分析工具，通过将递归过程图形化，使得复杂度分析更加直观和易于理解。无论是简单的递归方程还是复杂的分治算法，递归树方法都为我们的算法分析提供了重要的理论支持和实践指导。通过深入理解和灵活运用递归树方法，我们能够更加高效地设计和分析各种算法。