
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/default.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
  <title>3.5.1 特征</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=STIX+Two+Math&display=swap">
  <link rel="stylesheet" href="../../markdown.css">
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="../../markdown.js"></script>
</head>
<body>
  <div class="container">
    <h1>00_3.5.1_特征</h1>
<pre><code>Lecture: 3_第三部分_什么决定用户体验？/3.5_个性化与点击率预估
Content: 00_3.5.1_特征
</code></pre>
<h3>特征的极致详细分析</h3>
<h4>一、任务综述</h4>
<p>在个性化和点击率预估中，特征起到了至关重要的作用。通过分析用户的查询词、文档特征、用户特征和场景特征，可以有效提升推荐系统和搜索引擎的准确性和用户满意度。</p>
<h4>二、特征的基本分类</h4>
<h5>1. 按来源分类</h5>
<ul>
<li><strong>查询词特征</strong>：包括文本特征、查询词的类目、查询词的意图（如时效性、地域性的诉求）。</li>
<li><strong>文档特征</strong>：包括文档ID、作者ID、文档类目、命名实体、地理定位、发布时间等。</li>
<li><strong>用户特征</strong>：包括用户ID、用户画像（如性别、年龄等）、用户历史行为序列。</li>
<li><strong>场景特征</strong>：包括当前时刻、是否是周末或节假日、用户所在地点、设备信息等。</li>
<li><strong>统计特征</strong>：包括文档的曝光次数、点击次数、交互次数、点击率、交互率等。</li>
</ul>
<h5>2. 按性质分类</h5>
<ul>
<li><strong>数值特征</strong>：如文档的发布时间、点击次数等。</li>
<li><strong>离散特征</strong>：如查询词的类目、用户的性别等。</li>
</ul>
<h4>三、特征的详细分析</h4>
<h5>1. 查询词特征</h5>
<ul>
<li><strong>文本特征</strong>：使用BERT模型对查询词进行向量表征，存储在哈希表中，供线上读取。</li>
<li><strong>查询词类目和意图</strong>：如时效性诉求和地域性诉求，通过分词器将查询词切分成多个词，并将每个词表征为向量。</li>
</ul>
<h5>2. 文档特征</h5>
<ul>
<li><strong>文档ID和作者ID</strong>：通过嵌入层表征为向量，由于数量巨大，对训练和推理要求较高。</li>
<li><strong>文档类目和命名实体</strong>：离散特征，经嵌入层表征为向量，反映用户是否对文档感兴趣。</li>
<li><strong>地理定位</strong>：反映文档的地理位置，对用户的本地化需求有很大影响。</li>
<li><strong>发布时间</strong>：通常对其做分桶处理，转化为离散特征。</li>
<li><strong>内容质量分数</strong>：数值特征，对点击率模型有微弱贡献。</li>
</ul>
<h5>3. 用户特征</h5>
<ul>
<li><strong>用户ID</strong>：通过嵌入层表征为向量，记录用户的兴趣点。</li>
<li><strong>用户画像</strong>：包括性别、年龄、感兴趣的类目和命名实体等，离散特征经嵌入层表征为向量。</li>
<li><strong>用户历史行为序列</strong>：包括最近搜索过的查询词、点击过的文档、交互过的文档，被表征为多个向量。</li>
</ul>
<h5>4. 场景特征</h5>
<ul>
<li><strong>当前时刻</strong>：反映用户在不同时间段的搜索需求。</li>
<li><strong>是否是周末或节假日</strong>：反映用户在不同日期的搜索需求。</li>
<li><strong>用户所在地点</strong>：用户对所在地内容更感兴趣，因此需要地点特征。</li>
<li><strong>设备信息</strong>：如iOS和安卓用户的点击率有显著差异。</li>
</ul>
<h4>四、特征交叉与建模</h4>
<h5>1. 特征交叉</h5>
<p>特征交叉是提升模型能力的重要方法，通过将不同特征组合在一起，可以捕捉到更多的复杂关系。</p>
<ul>
<li><strong>方法</strong>：可以使用简单的拼接、乘积等方法，也可以使用深度交叉网络（DCN）等高级方法。</li>
</ul>
<h5>2. 用户行为序列建模</h5>
<p>系统记录用户的最近行为，并将这些行为表征为向量输入模型。</p>
<ul>
<li><strong>点击行为</strong>：记录用户最近点击的文档ID，将这些ID表征为向量并取平均。</li>
<li><strong>搜索行为</strong>：记录用户最近搜索的查询词，用BERT模型离线计算查询词的向量表征。</li>
</ul>
<h4>五、特征的重要性评估</h4>
<p>在模型训练过程中，通过特征重要性评估可以确定哪些特征对模型效果贡献最大。</p>
<ul>
<li><strong>方法</strong>：可以使用树模型的特征重要性方法，或通过模型训练的梯度信息评估。</li>
<li><strong>应用</strong>：根据特征的重要性，优化特征工程，去除无效特征，增强模型的泛化能力。</li>
</ul>
<h4>六、总结</h4>
<p>特征在个性化和点击率预估中扮演关键角色。通过合理的特征选择、交叉和建模，可以显著提升推荐系统和搜索引擎的效果。在实际应用中，持续优化特征工程是保持模型竞争力的重要手段。</p>
<hr>
<h3>特征分类的极致详细比较表</h3>
<table>
<thead>
<tr>
<th>特征类别</th>
<th>特征名称</th>
<th>详细说明</th>
<th>特征类型</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>查询词特征</strong></td>
<td>文本特征</td>
<td>使用BERT模型对查询词进行向量表征，存储在哈希表中，供线上读取。</td>
<td>连续型</td>
<td>&quot;北京的天气&quot;, &quot;附近的餐厅&quot;</td>
</tr>
<tr>
<td></td>
<td>查询词类目和意图</td>
<td>查询词的类别和用户意图，如时效性诉求和地域性诉求，通过分词器将查询词切分成多个词，并将每个词表征为向量。</td>
<td>离散型</td>
<td>查询词：&quot;买手机&quot;，类目：&quot;电子产品&quot;，意图：&quot;购买&quot;</td>
</tr>
<tr>
<td><strong>文档特征</strong></td>
<td>文档ID和作者ID</td>
<td>通过嵌入层表征为向量，由于数量巨大，对训练和推理要求较高。</td>
<td>离散型</td>
<td>文档ID：12345，作者ID：67890</td>
</tr>
<tr>
<td></td>
<td>文档类目和命名实体</td>
<td>离散特征，经嵌入层表征为向量，反映用户是否对文档感兴趣。</td>
<td>离散型</td>
<td>类目：&quot;旅游&quot;，命名实体：&quot;故宫&quot;</td>
</tr>
<tr>
<td></td>
<td>地理定位</td>
<td>反映文档的地理位置，对用户的本地化需求有很大影响。</td>
<td>连续型</td>
<td>地理位置：&quot;北京&quot;，&quot;上海&quot;</td>
</tr>
<tr>
<td></td>
<td>发布时间</td>
<td>通常对其做分桶处理，转化为离散特征。</td>
<td>离散型</td>
<td>发布时间：&quot;2024-07-24&quot;</td>
</tr>
<tr>
<td></td>
<td>内容质量分数</td>
<td>数值特征，对点击率模型有微弱贡献。</td>
<td>连续型</td>
<td>质量分数：0.85</td>
</tr>
<tr>
<td><strong>用户特征</strong></td>
<td>用户ID</td>
<td>通过嵌入层表征为向量，记录用户的兴趣点。</td>
<td>离散型</td>
<td>用户ID：54321</td>
</tr>
<tr>
<td></td>
<td>用户画像</td>
<td>包括性别、年龄、感兴趣的类目和命名实体等，离散特征经嵌入层表征为向量。</td>
<td>离散型</td>
<td>性别：&quot;男&quot;，年龄：&quot;25岁&quot;，感兴趣的类目：&quot;科技&quot;，感兴趣的命名实体：&quot;苹果公司&quot;</td>
</tr>
<tr>
<td></td>
<td>用户历史行为序列</td>
<td>包括最近搜索过的查询词、点击过的文档、交互过的文档，被表征为多个向量。</td>
<td>连续型</td>
<td>最近搜索：&quot;买手机&quot;，最近点击文档ID：12345，最近交互文档ID：67890</td>
</tr>
<tr>
<td><strong>场景特征</strong></td>
<td>当前时刻</td>
<td>反映用户在不同时间段的搜索需求。</td>
<td>连续型</td>
<td>当前时间：&quot;2024-07-24 15:30&quot;</td>
</tr>
<tr>
<td></td>
<td>是否是周末或节假日</td>
<td>反映用户在不同日期的搜索需求。</td>
<td>离散型</td>
<td>是否周末：&quot;是&quot;</td>
</tr>
<tr>
<td></td>
<td>用户所在地点</td>
<td>用户对所在地内容更感兴趣，因此需要地点特征。</td>
<td>连续型</td>
<td>用户地点：&quot;北京市海淀区&quot;</td>
</tr>
<tr>
<td></td>
<td>设备信息</td>
<td>如iOS和安卓用户的点击率有显著差异。</td>
<td>离散型</td>
<td>设备：&quot;iPhone&quot;，&quot;安卓&quot;</td>
</tr>
<tr>
<td><strong>统计特征</strong></td>
<td>曝光次数</td>
<td>文档的曝光次数。</td>
<td>连续型</td>
<td>曝光次数：10000</td>
</tr>
<tr>
<td></td>
<td>点击次数</td>
<td>文档的点击次数。</td>
<td>连续型</td>
<td>点击次数：5000</td>
</tr>
<tr>
<td></td>
<td>交互次数</td>
<td>文档的交互次数，如点赞、评论、收藏等。</td>
<td>连续型</td>
<td>交互次数：2000</td>
</tr>
<tr>
<td></td>
<td>点击率</td>
<td>文档的点击率，点击次数与曝光次数之比。</td>
<td>连续型</td>
<td>点击率：0.5</td>
</tr>
<tr>
<td></td>
<td>交互率</td>
<td>文档的交互率，交互次数与曝光次数之比。</td>
<td>连续型</td>
<td>交互率：0.2</td>
</tr>
</tbody>
</table>
<h3>特征分类详细分析</h3>
<h4>查询词特征</h4>
<ol>
<li>
<p><strong>文本特征</strong>：</p>
<ul>
<li><strong>定义</strong>：使用BERT模型对查询词进行向量表征，存储在哈希表中，供线上读取。</li>
<li><strong>类型</strong>：连续型</li>
<li><strong>例子</strong>：查询词：&quot;北京的天气&quot;, &quot;附近的餐厅&quot;</li>
</ul>
</li>
<li>
<p><strong>查询词类目和意图</strong>：</p>
<ul>
<li><strong>定义</strong>：查询词的类别和用户意图，如时效性诉求和地域性诉求，通过分词器将查询词切分成多个词，并将每个词表征为向量。</li>
<li><strong>类型</strong>：离散型</li>
<li><strong>例子</strong>：查询词：&quot;买手机&quot;，类目：&quot;电子产品&quot;，意图：&quot;购买&quot;</li>
</ul>
</li>
</ol>
<h4>文档特征</h4>
<ol>
<li>
<p><strong>文档ID和作者ID</strong>：</p>
<ul>
<li><strong>定义</strong>：通过嵌入层表征为向量，由于数量巨大，对训练和推理要求较高。</li>
<li><strong>类型</strong>：离散型</li>
<li><strong>例子</strong>：文档ID：12345，作者ID：67890</li>
</ul>
</li>
<li>
<p><strong>文档类目和命名实体</strong>：</p>
<ul>
<li><strong>定义</strong>：离散特征，经嵌入层表征为向量，反映用户是否对文档感兴趣。</li>
<li><strong>类型</strong>：离散型</li>
<li><strong>例子</strong>：类目：&quot;旅游&quot;，命名实体：&quot;故宫&quot;</li>
</ul>
</li>
<li>
<p><strong>地理定位</strong>：</p>
<ul>
<li><strong>定义</strong>：反映文档的地理位置，对用户的本地化需求有很大影响。</li>
<li><strong>类型</strong>：连续型</li>
<li><strong>例子</strong>：地理位置：&quot;北京&quot;，&quot;上海&quot;</li>
</ul>
</li>
<li>
<p><strong>发布时间</strong>：</p>
<ul>
<li><strong>定义</strong>：通常对其做分桶处理，转化为离散特征。</li>
<li><strong>类型</strong>：离散型</li>
<li><strong>例子</strong>：发布时间：&quot;2024-07-24&quot;</li>
</ul>
</li>
<li>
<p><strong>内容质量分数</strong>：</p>
<ul>
<li><strong>定义</strong>：数值特征，对点击率模型有微弱贡献。</li>
<li><strong>类型</strong>：连续型</li>
<li><strong>例子</strong>：质量分数：0.85</li>
</ul>
</li>
</ol>
<h4>用户特征</h4>
<ol>
<li>
<p><strong>用户ID</strong>：</p>
<ul>
<li><strong>定义</strong>：通过嵌入层表征为向量，记录用户的兴趣点。</li>
<li><strong>类型</strong>：离散型</li>
<li><strong>例子</strong>：用户ID：54321</li>
</ul>
</li>
<li>
<p><strong>用户画像</strong>：</p>
<ul>
<li><strong>定义</strong>：包括性别、年龄、感兴趣的类目和命名实体等，离散特征经嵌入层表征为向量。</li>
<li><strong>类型</strong>：离散型</li>
<li><strong>例子</strong>：性别：&quot;男&quot;，年龄：&quot;25岁&quot;，感兴趣的类目：&quot;科技&quot;，感兴趣的命名实体：&quot;苹果公司&quot;</li>
</ul>
</li>
<li>
<p><strong>用户历史行为序列</strong>：</p>
<ul>
<li><strong>定义</strong>：包括最近搜索过的查询词、点击过的文档、交互过的文档，被表征为多个向量。</li>
<li><strong>类型</strong>：连续型</li>
<li><strong>例子</strong>：最近搜索：&quot;买手机&quot;，最近点击文档ID：12345，最近交互文档ID：67890</li>
</ul>
</li>
</ol>
<h4>场景特征</h4>
<ol>
<li>
<p><strong>当前时刻</strong>：</p>
<ul>
<li><strong>定义</strong>：反映用户在不同时间段的搜索需求。</li>
<li><strong>类型</strong>：连续型</li>
<li><strong>例子</strong>：当前时间：&quot;2024-07-24 15:30&quot;</li>
</ul>
</li>
<li>
<p><strong>是否是周末或节假日</strong>：</p>
<ul>
<li><strong>定义</strong>：反映用户在不同日期的搜索需求。</li>
<li><strong>类型</strong>：离散型</li>
<li><strong>例子</strong>：是否周末：&quot;是&quot;</li>
</ul>
</li>
<li>
<p><strong>用户所在地点</strong>：</p>
<ul>
<li><strong>定义</strong>：用户对所在地内容更感兴趣，因此需要地点特征。</li>
<li><strong>类型</strong>：连续型</li>
<li><strong>例子</strong>：用户地点：&quot;北京市海淀区&quot;</li>
</ul>
</li>
<li>
<p><strong>设备信息</strong>：</p>
<ul>
<li><strong>定义</strong>：如iOS和安卓用户的点击率有显著差异。</li>
<li><strong>类型</strong>：离散型</li>
<li><strong>例子</strong>：设备：&quot;iPhone&quot;，&quot;安卓&quot;</li>
</ul>
</li>
</ol>
<h4>统计特征</h4>
<ol>
<li>
<p><strong>曝光次数</strong>：</p>
<ul>
<li><strong>定义</strong>：文档的曝光次数。</li>
<li><strong>类型</strong>：连续型</li>
<li><strong>例子</strong>：曝光次数：10000</li>
</ul>
</li>
<li>
<p><strong>点击次数</strong>：</p>
<ul>
<li><strong>定义</strong>：文档的点击次数。</li>
<li><strong>类型</strong>：连续型</li>
<li><strong>例子</strong>：点击次数：5000</li>
</ul>
</li>
</ol>

    <h3>Python 文件</h3>
    <pre><code># 00_3.5.1_特征

"""
Lecture: 3_第三部分_什么决定用户体验？/3.5_个性化与点击率预估
Content: 00_3.5.1_特征
"""

</code></pre>
  </div>
</body>
</html>
  